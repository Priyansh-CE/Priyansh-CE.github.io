<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snake Arena Elite</title>
<style>
body{margin:0;overflow:hidden;background:#0b1220;font-family:Arial;}
canvas{display:block;}
#ui{
position:fixed;
top:10px;
right:20px;
color:white;
text-align:right;
}
#leaderboard{
position:fixed;
top:10px;
left:20px;
color:white;
}
#skinSelect{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
}
button{
padding:8px 15px;
margin:5px;
border:none;
border-radius:6px;
cursor:pointer;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="leaderboard"></div>
<div id="ui"></div>

<div id="skinSelect">
<button onclick="selectSkin('#4ade80')">Green</button>
<button onclick="selectSkin('#3b82f6')">Blue</button>
<button onclick="selectSkin('#ef4444')">Red</button>
<button onclick="selectSkin('#f59e0b')">Gold</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const WORLD_SIZE = 4000;

let camera={x:0,y:0};
let player;
let enemies=[];
let foods=[];
let gameOver=false;
let boosting=false;
let magnetActive=false;
let magnetTimer=0;
let selectedSkin="#4ade80";

class Snake{
constructor(x,y,color,isAI=false){
this.points=[];
this.angle=0;
this.targetAngle=0;
this.speed=2;
this.length=300;
this.radius=10;
this.color=color;
this.isAI=isAI;

for(let i=0;i<200;i++){
this.points.push({x:x-i,y:y});
}
}

update(){
let diff=this.targetAngle-this.angle;
diff=Math.atan2(Math.sin(diff),Math.cos(diff));
this.angle+=diff*0.1;

if(this.isAI){
let dx=player.points[0].x-this.points[0].x;
let dy=player.points[0].y-this.points[0].y;
let dist=Math.hypot(dx,dy);

if(dist<800){
this.targetAngle=Math.atan2(dy,dx);
}
}

let sp=boosting&&!this.isAI?4:this.speed;

const head=this.points[0];
const nx=head.x+Math.cos(this.angle)*sp;
const ny=head.y+Math.sin(this.angle)*sp;

this.points.unshift({x:nx,y:ny});

let total=0;
for(let i=0;i<this.points.length-1;i++){
let dx=this.points[i].x-this.points[i+1].x;
let dy=this.points[i].y-this.points[i+1].y;
total+=Math.hypot(dx,dy);
if(total>this.length){
this.points.splice(i+1);
break;
}
}
}

grow(n){this.length+=n;}

draw(){
ctx.lineCap="round";
ctx.lineJoin="round";
ctx.lineWidth=this.radius*2;
ctx.strokeStyle=this.color;
ctx.shadowColor=this.color;
ctx.shadowBlur=15;
ctx.beginPath();
ctx.moveTo(this.points[0].x,this.points[0].y);
for(let i=1;i<this.points.length;i++){
ctx.lineTo(this.points[i].x,this.points[i].y);
}
ctx.stroke();
ctx.shadowBlur=0;
}
}

function spawnFood(type="normal"){
foods.push({
x:Math.random()*WORLD_SIZE,
y:Math.random()*WORLD_SIZE,
type:type
});
}

function selectSkin(color){
selectedSkin=color;
init();
}

function init(){
player=new Snake(WORLD_SIZE/2,WORLD_SIZE/2,selectedSkin);
enemies=[];
foods=[];
for(let i=0;i<300;i++) spawnFood();
for(let i=0;i<8;i++){
enemies.push(new Snake(
Math.random()*WORLD_SIZE,
Math.random()*WORLD_SIZE,
"#ef4444",
true
));
}
}

canvas.addEventListener("mousemove",e=>{
player.targetAngle=Math.atan2(
e.clientY-canvas.height/2,
e.clientX-canvas.width/2
);
});

document.addEventListener("keydown",e=>{
if(e.key==="Shift") boosting=true;
if(e.key==="m") activateMagnet();
});
document.addEventListener("keyup",e=>{
if(e.key==="Shift") boosting=false;
});

function activateMagnet(){
magnetActive=true;
magnetTimer=300;
}

function update(){
ctx.fillStyle="#0b1220";
ctx.fillRect(0,0,canvas.width,canvas.height);

player.update();
enemies.forEach(e=>e.update());

camera.x=player.points[0].x-canvas.width/2;
camera.y=player.points[0].y-canvas.height/2;

ctx.save();
ctx.translate(-camera.x,-camera.y);

foods.forEach((f,i)=>{
if(f.type==="super"){
ctx.fillStyle="#f59e0b";
ctx.beginPath();
ctx.arc(f.x,f.y,10,0,Math.PI*2);
ctx.fill();
}else{
ctx.fillStyle="#fde047";
ctx.beginPath();
ctx.arc(f.x,f.y,6,0,Math.PI*2);
ctx.fill();
}

let dx=player.points[0].x-f.x;
let dy=player.points[0].y-f.y;
let d=Math.hypot(dx,dy);

if(magnetActive && d<200){
f.x+=dx*-0.05;
f.y+=dy*-0.05;
}

if(d<15){
foods.splice(i,1);
player.grow(f.type==="super"?150:30);
spawnFood(Math.random()<0.02?"super":"normal");
}
});

player.draw();
enemies.forEach(e=>e.draw());

ctx.restore();

updateLeaderboard();
updateUI();

if(magnetActive){
magnetTimer--;
if(magnetTimer<=0) magnetActive=false;
}

requestAnimationFrame(update);
}

function updateLeaderboard(){
let list=[player,...enemies];
list.sort((a,b)=>b.length-a.length);

let html="<b>Leaderboard</b><br>";
list.slice(0,6).forEach((s,i)=>{
let name=s===player?"YOU":"AI";
html+=`${i+1}. ${name} - ${Math.floor(s.length)}<br>`;
});
document.getElementById("leaderboard").innerHTML=html;
}

function updateUI(){
document.getElementById("ui").innerHTML=
magnetActive?`Magnet: ${Math.floor(magnetTimer/60)}s`:"Press M for Magnet";
}

init();
update();
</script>

</body>
</html>
