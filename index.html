<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snake Arena Pro</title>
<style>
body{margin:0;overflow:hidden;background:#070d18;}
canvas{display:block;}
#ui{position:fixed;top:10px;left:10px;color:white;font-family:Arial;}
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="ui">Move Mouse | Shift Boost</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

const WORLD=4000;

let player,enemies=[],foods=[],particles=[];
let boosting=false;

const eatSound=new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");
const boomSound=new Audio("https://actions.google.com/sounds/v1/explosions/explosion.ogg");

class Snake{
constructor(x,y,color,isAI=false){
this.points=[];
this.angle=0;
this.targetAngle=0;
this.speed=2;
this.length=300;
this.radius=10;
this.color=color;
this.isAI=isAI;
this.alive=true;

for(let i=0;i<200;i++)
this.points.push({x:x-i,y:y});
}

update(){
if(!this.alive)return;

let diff=this.targetAngle-this.angle;
diff=Math.atan2(Math.sin(diff),Math.cos(diff));
this.angle+=diff*0.1;

if(this.isAI){
let dx=player.points[0].x-this.points[0].x;
let dy=player.points[0].y-this.points[0].y;
this.targetAngle=Math.atan2(dy,dx);
}

let sp=boosting&&!this.isAI?4:this.speed;

let head=this.points[0];
let nx=head.x+Math.cos(this.angle)*sp;
let ny=head.y+Math.sin(this.angle)*sp;

this.points.unshift({x:nx,y:ny});

let total=0;
for(let i=0;i<this.points.length-1;i++){
let dx=this.points[i].x-this.points[i+1].x;
let dy=this.points[i].y-this.points[i+1].y;
total+=Math.hypot(dx,dy);
if(total>this.length){
this.points.splice(i+1);
break;
}
}
}

draw(){
if(!this.alive)return;
ctx.lineWidth=this.radius*2;
ctx.lineCap="round";
ctx.strokeStyle=this.color;
ctx.shadowColor=this.color;
ctx.shadowBlur=15;
ctx.beginPath();
ctx.moveTo(this.points[0].x,this.points[0].y);
for(let i=1;i<this.points.length;i++)
ctx.lineTo(this.points[i].x,this.points[i].y);
ctx.stroke();
ctx.shadowBlur=0;
}

explode(){
this.alive=false;
boomSound.play();

this.points.forEach(p=>{
for(let i=0;i<2;i++){
foods.push({x:p.x,y:p.y});
}
});

for(let i=0;i<40;i++){
particles.push({
x:this.points[0].x,
y:this.points[0].y,
vx:(Math.random()-0.5)*8,
vy:(Math.random()-0.5)*8,
life:60
});
}
}
}

function spawnFood(){
foods.push({
x:Math.random()*WORLD,
y:Math.random()*WORLD
});
}

function init(){
player=new Snake(WORLD/2,WORLD/2,"#4ade80");
enemies=[];
foods=[];
particles=[];

for(let i=0;i<300;i++)spawnFood();

for(let i=0;i<6;i++){
enemies.push(new Snake(
Math.random()*WORLD,
Math.random()*WORLD,
"#ef4444",
true
));
}
}

canvas.addEventListener("mousemove",e=>{
player.targetAngle=Math.atan2(
e.clientY-canvas.height/2,
e.clientX-canvas.width/2
);
});

document.addEventListener("keydown",e=>{
if(e.key==="Shift")boosting=true;
});
document.addEventListener("keyup",e=>{
if(e.key==="Shift")boosting=false;
});

function checkCollisions(){
enemies.forEach(enemy=>{
if(!enemy.alive)return;

let dx=player.points[0].x-enemy.points[0].x;
let dy=player.points[0].y-enemy.points[0].y;
if(Math.hypot(dx,dy)<15){
enemy.explode();
}
});
}

function update(){
ctx.fillStyle="#070d18";
ctx.fillRect(0,0,canvas.width,canvas.height);

let camX=player.points[0].x-canvas.width/2;
let camY=player.points[0].y-canvas.height/2;

ctx.save();
ctx.translate(-camX,-camY);

foods.forEach((f,i)=>{
ctx.fillStyle="#fde047";
ctx.beginPath();
ctx.arc(f.x,f.y,6,0,Math.PI*2);
ctx.fill();

let dx=player.points[0].x-f.x;
let dy=player.points[0].y-f.y;
if(Math.hypot(dx,dy)<15){
foods.splice(i,1);
player.length+=20;
eatSound.play();
spawnFood();
}
});

player.update();
enemies.forEach(e=>e.update());
checkCollisions();

player.draw();
enemies.forEach(e=>e.draw());

particles.forEach((p,i)=>{
p.x+=p.vx;
p.y+=p.vy;
p.life--;
ctx.fillStyle="orange";
ctx.beginPath();
ctx.arc(p.x,p.y,3,0,Math.PI*2);
ctx.fill();
if(p.life<=0)particles.splice(i,1);
});

ctx.restore();

requestAnimationFrame(update);
}

init();
update();
</script>

</body>
</html>
